(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[32],{422:function(e,c,t){},891:function(e,c,t){"use strict";t.r(c);var a=t(1),s=t(370),n=t.n(s),i=t(365),l=(t(422),t(19)),r=t(7);const o=async(e,c,t,a,s)=>{const i=await(async(e,c)=>{const t=await n.a.get("".concat("https://rightchoiceprops.com/backend/","/invoice/return/").concat(e,"/items/").concat(c));return t.data[0]?t.data[0]:0})(e,t.target.value);let l=[...a];i?(l[c].code=t.target.value,l[c].error="",l[c].rquantity=0,l[c].name=i.name,l[c].quantity=i.quantity,l[c+1]={code:"",name:"",error:"",quantity:0,rquantity:0,damaged_cost:0,damaged_type:"",isDamaged:!1,isRecieved:!1}):(l[c].code=t.target.value,l[c].error="Invalid Code."),s((e=>[...l]))},d=(e,c,t,a,s)=>Object(r.jsxs)(i.M,{className:"mb-4",children:[Object(r.jsx)("div",{className:"col-sm-2",children:Object(r.jsx)(i.w,{name:"code",autoComplete:"off",type:"text",id:"productCode",readonly:!!e.isRecieved,onChange:e=>o(t.invoice,c,e,a,s),placeholder:"Code(Ex: PR-12345)"})}),""!=e.error?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"col-sm-6 error-message",children:"Product code is invalid OR does not exist in this Invoice"})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"col-sm-2",children:Object(r.jsx)(i.w,{name:"name",autoComplete:"off",type:"text",id:"name",readOnly:!0,value:e.name||"",placeholder:"Product Name"})}),Object(r.jsx)("div",{className:"col-sm-1",children:Object(r.jsx)(i.w,{name:"quantity",required:""!==e.name,onChange:e=>((e,c,t,a)=>{let s=[...t];s[e].rquantity=c.target.value,a((e=>[...s]))})(c,e,a,s),autoComplete:"off",type:"number",min:"1",max:e.quantity,placeholder:"".concat(e.quantity||""," Products")})}),Object(r.jsx)("div",{className:"col-sm-1 m-10imp",children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"checkbox",onChange:e=>((e,c,t,a)=>{let s=[...t];s[e].isDamaged=c.target.checked,s[e].damaged_cost=c.target.checked?s[e].damaged_cost:0,a((e=>[...s])),console.log(t)})(c,e,a,s),name:"isDamaged"})," Is Damaged"]})}),e.isDamaged?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"col-sm-2",children:Object(r.jsxs)("select",{className:"form-control",required:!0,onChange:e=>((e,c,t,a)=>{let s=[...t];s[e].damaged_type=c.target.value,a((e=>[...s]))})(c,e,a,s),children:[Object(r.jsx)("option",{value:"",children:"Select"}),Object(r.jsx)("option",{value:"partial",children:"Partially Damaged"}),Object(r.jsx)("option",{value:"full",children:"Full Damaged"})]})}),Object(r.jsx)("div",{className:"col-sm-2",children:Object(r.jsx)(i.w,{required:e.isDamaged,onChange:e=>((e,c,t,a)=>{let s=[...t];s[e].damaged_cost=c.target.value,a((e=>[...s]))})(c,e,a,s),autoComplete:"off",type:"text",placeholder:"Enter damaged cost"})})]}):null,Object(r.jsx)("div",{className:"col-sm-1",children:e.isRecieved?Object(r.jsx)("input",{type:"button",value:"Received",className:"btn btn-secondary"}):Object(r.jsx)("input",{type:"button",onClick:i=>(async(e,c,t,a,s,i)=>{e.preventDefault();let l=[...t];l[c].isRecieved=!0,i((e=>[...l]));try{await n.a.post("".concat("https://rightchoiceprops.com/backend/","/invoice/return/"),{formValues:a,invoice_id:s.invoice})}catch(e){}})(i,c,a,e,t,s),className:"btn btn-primary",value:"Recieve"})})]})]},c),j=(e,c,t)=>{const a=Object(l.g)();return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(i.M,{children:Object(r.jsx)(i.m,{xs:12,children:Object(r.jsx)("form",{method:"post",onSubmit:e=>{a.push("/returns/list")},children:Object(r.jsxs)(i.h,{className:"mb-4",children:[Object(r.jsx)(i.l,{children:Object(r.jsxs)("strong",{children:["Receive Invoice Items for ",t.invoice]})}),Object(r.jsx)(i.i,{children:e.map(((a,s)=>a.isRecieved?((e,c,t)=>Object(r.jsxs)(i.M,{className:"mb-4",children:[Object(r.jsx)("div",{className:"col-sm-2",children:Object(r.jsx)(i.w,{name:"code",autoComplete:"off",type:"text",id:"productCode",readOnly:!0,placeholder:"Code(Ex: PR-12345)"})}),""!=e.error?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"col-sm-6 error-message",children:"Product code is invalid OR does not exist in this Invoice"})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"col-sm-2",children:Object(r.jsx)(i.w,{name:"name",autoComplete:"off",type:"text",id:"name",readOnly:!0,value:e.name||"",placeholder:"Product Name"})}),Object(r.jsx)("div",{className:"col-sm-1",children:Object(r.jsx)(i.w,{name:"quantity",readOnly:!0,autoComplete:"off",type:"number",min:"1",max:e.quantity,placeholder:"".concat(e.quantity||""," Products")})}),Object(r.jsx)("div",{className:"col-sm-1 m-10imp",children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"checkbox",readOnly:!0,name:"isDamaged"})," Is Damaged"]})}),e.isDamaged?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"col-sm-2",children:Object(r.jsxs)("select",{className:"form-control",required:!0,readOnly:!0,children:[Object(r.jsx)("option",{value:"",children:"Select"}),Object(r.jsx)("option",{value:"partial",children:"Partially Damaged"}),Object(r.jsx)("option",{value:"full",children:"Full Damaged"})]})}),Object(r.jsx)("div",{className:"col-sm-2",children:Object(r.jsx)(i.w,{required:e.isDamaged,readOnly:!0,autoComplete:"off",type:"text",placeholder:"Enter damaged cost"})})]}):null,Object(r.jsx)("div",{className:"col-sm-1",children:Object(r.jsx)("input",{type:"button",value:"Received",className:"btn btn-secondary"})})]})]},c))(a,s):d(a,s,t,e,c)))}),Object(r.jsx)(i.j,{children:Object(r.jsxs)(i.M,{children:[Object(r.jsx)("div",{className:"col-sm-6"}),Object(r.jsx)("div",{className:"col-sm-6 alignright",children:Object(r.jsx)("input",{type:"submit",className:"btn btn-secondary",value:"Go Back to List"})})]})})]})})})})})},m=(e,c)=>Object(r.jsx)("div",{children:Object(r.jsx)(i.M,{children:Object(r.jsx)(i.m,{xs:12,children:Object(r.jsx)(i.h,{className:"mb-2",children:Object(r.jsx)(i.l,{children:Object(r.jsxs)(i.M,{className:"p-2",children:[Object(r.jsx)("div",{className:"col-sm-2",children:Object(r.jsxs)("h6",{children:["Invoices found ",e.length]})}),Object(r.jsx)("div",{className:"col-sm-6",children:Object(r.jsxs)("select",{className:"form-control",onChange:c,children:[Object(r.jsx)("option",{value:"0",children:"Select Return Invoice Number"}),e.map((e=>Object(r.jsxs)("option",{value:e.invoice,children:[e.to_name," - ",e.invoice]},e.invoice)))]})})]})})})})})}),b=(e,c)=>Object(r.jsx)("div",{children:Object(r.jsx)("form",{onSubmit:c,children:Object(r.jsx)(i.M,{children:Object(r.jsx)(i.m,{xs:12,children:Object(r.jsxs)(i.h,{className:"mb-2",children:[Object(r.jsx)(i.l,{children:Object(r.jsx)(i.M,{className:"p-2",children:Object(r.jsx)("div",{className:"col-sm-10",children:Object(r.jsx)("h4",{children:"Receive Invoice form"})})})}),Object(r.jsx)(i.i,{children:Object(r.jsxs)(i.M,{children:[Object(r.jsx)("div",{className:"col-sm-6",children:Object(r.jsx)("input",{type:"text",onChange:c=>{e(c.target.value)},className:"form-control",placeholder:"Search by Company Name/Invoice Number/Director/Hero"})}),Object(r.jsx)("div",{className:"col-sm-5",children:Object(r.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Get Invoices"})})]})})]})})})})});t(377).config();c.default=e=>{const[c,t]=Object(a.useState)(""),[s,i]=Object(a.useState)(!1),[l,o]=Object(a.useState)((()=>[])),[d,h]=Object(a.useState)([]),[x,O]=Object(a.useState)((()=>[{code:"",name:"",error:"",quantity:0,isDamaged:!1}]));return Object(r.jsxs)(r.Fragment,{children:[b(t,(async e=>{e.stopPropagation();let t=await n.a.post("".concat("https://rightchoiceprops.com/backend/","/invoice/search"),{ss:c});i(!0),o((e=>[...t.data]))})),l.length?Object(r.jsxs)(r.Fragment,{children:[m(l,(e=>{0!==e.target.value?h((c=>l.filter((c=>c.invoice===e.target.value))[0])):h((e=>[]))})),Object(r.jsx)("hr",{}),d&&void 0!==d.invoice?j(x,O,d):Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"message col-sm-6",children:"Please select the Invoice to return items"})})]}):Object(r.jsx)(r.Fragment,{children:s?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"message col-sm-6",children:"No invoices found. Please refine your search"})}):Object(r.jsx)(r.Fragment,{})})]})}}}]);
//# sourceMappingURL=32.7d2c874a.chunk.js.map