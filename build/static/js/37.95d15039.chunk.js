(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[37],{434:function(e,t,c){"use strict";var s=c(1),a=c(381),n=c(379),d=c.n(n),i=c(370),r=c.n(i),j=c(429),l=c(7);const o=[{id:4,value:"Advance Payment"},{id:3,value:"Partial Payment"},{id:2,value:"Full Payment"}],h=["Google Pay","Paytm","PhonePe","Internet Banking","Cheque","Cash"];t.a=e=>{let{invoice:t,payments:c,show:n,handleClose:i,isInvoice:b,isPaid:m,cb:O,isfinder:x=!1,isQuote:p=!1}=e;const[u,v]=Object(s.useState)((()=>t));u.inv=t.inv,u.data=t.data;const[y,g]=Object(s.useState)((()=>t.inv)),[N,_]=Object(s.useState)((()=>t.finalamount)),[f,w]=Object(s.useState)((()=>t.payableamount)),[k,F]=Object(s.useState)((()=>t.data.reduce(((e,t)=>e+t.cost),0).toFixed(2))),[C,S]=Object(s.useState)((()=>t.data));Object(s.useEffect)((()=>{S((e=>t.data)),w((e=>t.payableamount)),F((e=>t.data.reduce(((e,t)=>e+t.cost),0).toFixed(2)))}),[t.inv]);const M=t.data[0],D={height:120,width:350},[P,I]=Object(s.useState)((()=>!1)),[Y,A]=Object(s.useState)((()=>0)),[R,T]=Object(s.useState)((()=>"")),[q,B]=Object(s.useState)((()=>"")),[H,E]=Object(s.useState)((()=>"")),[L,G]=Object(s.useState)((()=>"")),[Q,z]=Object(s.useState)((()=>"")),J=()=>{I((e=>!0))},U=()=>{let e={method:L,payment_type:Q,amt:Y,chequeno:R,bank:q,transId:H,invoice_id:u.inv};r.a.post("".concat("https://rightchoiceprops.com/backend/","/invoice/payment/").concat(t.inv),e).then((async e=>{b||r.a.post("".concat("https://rightchoiceprops.com/backend/","/invoice/mark/").concat(t.inv)).then((async e=>{})),2==Q&&r.a.post("".concat("https://rightchoiceprops.com/backend/","/invoice/markpaid/").concat(t.inv)).then((async e=>{})),I((e=>!1)),E(""),z(""),G(""),O(),i()}))},W=e=>{r.a.post("".concat("https://rightchoiceprops.com/backend/","/invoice/").concat(t.inv,"/mark/").concat(e)).then((async e=>{O(),i()}))};return(()=>{return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(a.a,{show:n,onHide:i,size:"xl",children:[Object(l.jsx)(a.a.Header,{className:"logo-color logo",children:Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col-8 logo-color columnLeft",children:Object(l.jsx)("img",{src:j.a,style:D})}),Object(l.jsx)("div",{className:"col-2 printRight",children:Object(l.jsx)("button",{className:"btn btn-primary",onClick:()=>(e=>{window.open("#/invoice/internalprint/".concat(e),"_blank").focus()})(t.inv),children:"Print"})}),Object(l.jsx)("div",{className:"col-2 printRight",children:Object(l.jsx)("button",{className:"btn btn-primary",onClick:()=>(e=>{window.open("#/invoice/imageprint/".concat(e),"_blank").focus()})(t.inv),children:"Image Print"})})]})}),Object(l.jsx)(a.a.Body,{children:Object(l.jsxs)("div",{className:"container-fluid",children:[Object(l.jsxs)("div",{className:"lh-3 row mt-1",children:[Object(l.jsxs)("div",{className:"col-sm-4",children:[Object(l.jsxs)("strong",{children:[c.length?"Invoice":"Quotation"," Number:"]}),"\xa0\xa0",t.inv]}),Object(l.jsxs)("div",{className:"col-sm-4",children:[Object(l.jsx)("strong",{children:"From:"}),"\xa0\xa0",d.a.utc(M.startDate).format("dddd - MMM Do, YYYY")]}),Object(l.jsxs)("div",{className:"col-sm-4",children:[Object(l.jsx)("strong",{children:"To:"}),"\xa0\xa0",d.a.utc(M.endDate).format("dddd - MMM Do, YYYY")]})]}),Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"lh-3 row mt-4",children:[Object(l.jsxs)("div",{className:"col-sm-6",children:[Object(l.jsx)("strong",{children:"M/s"}),"\xa0\xa0",Object(l.jsx)("span",{className:"border-bottom",children:M.to_name?M.to_name:""})]}),Object(l.jsxs)("div",{className:"col-sm-6",children:[Object(l.jsx)("strong",{children:"Location"}),"\xa0\xa0",Object(l.jsx)("span",{className:"border-bottom",children:M.to_address})]})]}),Object(l.jsxs)("div",{className:"lh-3 row mt-4",children:[Object(l.jsxs)("div",{className:"col-sm-4",children:[Object(l.jsx)("strong",{children:"Art Director"}),"\xa0\xa0",Object(l.jsx)("span",{className:"border-bottom",children:M.art_director_name})]}),Object(l.jsxs)("div",{className:"col-sm-4",children:[Object(l.jsx)("strong",{children:"Hero/Director"}),"\xa0\xa0",Object(l.jsxs)("span",{className:"border-bottom",children:[M.name,"(",M.herodirector,")"]})]}),Object(l.jsxs)("div",{className:"col-sm-3",children:[Object(l.jsx)("strong",{children:"Content Type"}),"\xa0\xa0",Object(l.jsx)("span",{className:"border-bottom",children:M.content_type})]})]}),Object(l.jsxs)("div",{className:"lh-3 row mt-4",children:[Object(l.jsxs)("div",{className:"col-sm-6",children:[Object(l.jsx)("strong",{children:"Contact Name / Phone"}),"\xa0\xa0",Object(l.jsxs)("span",{className:"border-bottom",children:[M.contactName," / ",M.contactPhone]})]}),Object(l.jsxs)("div",{className:"col-sm-6",children:[Object(l.jsx)("strong",{children:"Received By / Phone"}),"\xa0\xa0",Object(l.jsxs)("span",{className:"border-bottom",children:[M.prop_receiver_name,"(",M.prop_receiver,") / ",M.art_phone]})]})]}),Object(l.jsxs)("div",{className:"row mt-5",children:[(e=C,Object(l.jsxs)("table",{className:"table table-striped",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{width:"4%",children:"Image"}),Object(l.jsx)("th",{width:"10%",children:"Code"}),Object(l.jsx)("th",{width:"25%",children:"Name"}),Object(l.jsx)("th",{width:"5%",children:"Qty"}),Object(l.jsx)("th",{width:"10%",children:"From"}),Object(l.jsx)("th",{width:"10%",children:"To"}),Object(l.jsx)("th",{width:"2%",children:"Days"}),Object(l.jsx)("th",{width:"10%",className:"money",children:"Hire Cost"}),x||m?Object(l.jsx)(l.Fragment,{}):Object(l.jsx)("th",{width:"5%",children:"Actions"})]})}),Object(l.jsx)("tbody",{children:e.map((e=>Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("img",{src:e.product_image,width:"30",height:"30"})}),Object(l.jsx)("td",{children:e.product_code}),Object(l.jsx)("td",{children:e.product_name}),Object(l.jsx)("td",{children:e.quantity}),Object(l.jsx)("td",{children:d.a.utc(e.pStartDate).format("DD/MM/yyyy")}),Object(l.jsx)("td",{children:d.a.utc(e.pEndDate).format("DD/MM/yyyy")}),Object(l.jsx)("td",{className:"money",children:e.rent_days}),Object(l.jsx)("td",{className:"money",children:e.cost.toFixed(2)}),Object(l.jsx)("td",{children:"-"})]},e.product_code)))})]})),Object(l.jsx)("table",{className:"table table-striped",children:Object(l.jsxs)("tbody",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsxs)("td",{className:"",children:[Object(l.jsx)("strong",{children:"Cost\xa0:\xa0"}),k]}),Object(l.jsxs)("td",{className:"",children:[Object(l.jsx)("strong",{children:"Discount\xa0:\xa0"}),t.discount," %"]}),Object(l.jsxs)("td",{className:"",children:[Object(l.jsx)("strong",{children:"GST\xa0:\xa0"}),t.gstpercentage," %"]}),Object(l.jsx)("td",{className:"money",children:Object(l.jsx)("strong",{children:"Payable Amount"})}),Object(l.jsx)("td",{className:"money",children:f})]}),!x&&b?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{className:"money",colSpan:4,children:Object(l.jsx)("strong",{children:"Total Paid till now"})}),Object(l.jsx)("td",{className:"money",children:c.reduce(((e,t)=>e+t.amount),0).toFixed(2)})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{className:"money",colSpan:4,children:Object(l.jsx)("strong",{children:"Remaining / Refund"})}),Object(l.jsx)("td",{className:"money",children:(f-c.reduce(((e,t)=>e+t.amount),0)).toFixed(2)})]})]}):Object(l.jsx)(l.Fragment,{})]})})]}),!x&&b?Object(l.jsx)("div",{className:"row mt-5",children:Object(l.jsxs)("table",{className:"table table-striped",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"S.No."}),Object(l.jsx)("th",{children:"Payment Type"}),Object(l.jsx)("th",{children:"Payment Method"}),Object(l.jsx)("th",{children:"Transaction Id"}),Object(l.jsx)("th",{children:"Amount"}),Object(l.jsx)("th",{children:"Paid On"})]})}),Object(l.jsx)("tbody",{children:c.map(((e,t)=>Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:t+1}),Object(l.jsx)("td",{children:e.paidby}),Object(l.jsxs)("td",{children:[e.method,"cheque"==e.method?Object(l.jsxs)("span",{children:["\xa0 / ",e.cheque_no," / ",e.bank," "]}):Object(l.jsx)(l.Fragment,{})]}),Object(l.jsx)("td",{children:e.transaction_id}),Object(l.jsx)("td",{children:e.amount}),Object(l.jsx)("td",{children:d.a.utc(e.paid_on).format("DD/MM/yyyy")})]},t)))})]})}):Object(l.jsx)(l.Fragment,{})]})]})}),Object(l.jsxs)(a.a.Footer,{children:[x||!b||m?Object(l.jsx)(l.Fragment,{}):Object(l.jsx)(l.Fragment,{children:void 0!==u.data&&u.data.length>0?Object(l.jsxs)(l.Fragment,{children:[2==u.data[0].invoice_status||1==u.data[0].invoice_status?Object(l.jsx)("button",{className:"btn btn-secondary",onClick:()=>W("rejected"),children:"Mark As Rejectd Invoice"}):Object(l.jsx)(l.Fragment,{}),3==u.data[0].invoice_status||1==u.data[0].invoice_status?Object(l.jsx)("button",{className:"btn btn-primary",onClick:()=>W("accepted"),children:"Mark As Accepted Invoice"}):Object(l.jsx)(l.Fragment,{}),2==u.data[0].invoice_status?Object(l.jsx)("button",{className:"btn btn-primary",onClick:()=>J(),children:"Add More Payments"}):Object(l.jsx)(l.Fragment,{})]}):Object(l.jsx)(l.Fragment,{})}),x||b||m?Object(l.jsx)(l.Fragment,{}):Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("button",{className:"btn btn-primary",onClick:()=>J(),children:"Mark As Invoice"})})]})]}),Object(l.jsxs)(a.a,{className:"",show:P,onHide:()=>I((e=>!1)),size:"xl",children:[Object(l.jsx)(a.a.Header,{closeButton:!0,children:Object(l.jsx)(a.a.Title,{children:"Add Payment Details"})}),Object(l.jsxs)(a.a.Body,{children:[Object(l.jsxs)("fieldset",{children:[Object(l.jsx)("legend",{children:"Payment Details"}),Object(l.jsxs)("div",{className:"row mt-2",children:[Object(l.jsx)("div",{className:"col",children:Object(l.jsxs)("select",{onChange:e=>G(e.target.value),className:"form-control",children:[Object(l.jsx)("option",{value:"",children:"Select Method"}),h.map((e=>Object(l.jsx)("option",{value:e,children:e})))]})}),Object(l.jsx)("div",{className:"col",children:Object(l.jsxs)("select",{onChange:e=>z(e.target.value),className:"form-control",children:[Object(l.jsx)("option",{value:"",children:"Select Type"}),o.map((e=>Object(l.jsx)("option",{value:e.id,children:e.value})))]})}),Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("input",{value:Y,type:"text",onChange:e=>A(e.target.value),className:"form-control",placeholder:"Amount"})}),"Cheque"===L?Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("input",{value:R,type:"text",onChange:e=>T(e.target.value),className:"form-control",placeholder:"Cheque No"})}):Object(l.jsx)(l.Fragment,{})]}),"Cheque"===L?Object(l.jsx)("div",{className:"row mt-2",children:Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("input",{value:q,type:"text",onChange:e=>B(e.target.value),className:"form-control",placeholder:"Enter Bank Details - Name, Branch"})})}):Object(l.jsx)(l.Fragment,{}),Object(l.jsx)("div",{className:"row mt-2",children:"cheque"!==L?Object(l.jsx)("div",{className:"col",children:Object(l.jsx)("input",{value:H,type:"text",onChange:e=>E(e.target.value),className:"form-control",placeholder:"Transaction Id"})}):Object(l.jsx)(l.Fragment,{})})]}),Object(l.jsx)("div",{children:"\xa0"})]}),Object(l.jsx)(a.a.Footer,{children:Object(l.jsx)("button",{className:"btn btn-primary",onClick:U,children:"Make Payment"})})]})]});var e})()}},873:function(e,t,c){"use strict";c.r(t);var s=c(1),a=c(379),n=c.n(a),d=c(96),i=c(365),r=c(434),j=c(370),l=c.n(j),o=c(7);c(377).config();t.default=e=>{const t="new",[c,a]=Object(s.useState)((()=>!1)),[j,h]=Object(s.useState)([]),[b,m]=Object(s.useReducer)(((e,c)=>{if(c.type===t){let t=c.payload.data[0].to_name?c.payload.data[0].to_name+" - "+c.payload.data[0].to_city:"";return{...e,inv:c.payload.inv,to_details:t,toName:c.payload.data[0].to_name,city:c.payload.data[0].to_city,address:c.payload.data[0].to_address,gst:c.payload.gst,dated:c.payload.data[0].rents_start_on,data:c.payload.data,status:c.payload.data[0].is_value,payment:c.payload.data[0].ip_value,finalamount:c.payload.data[0].finalamount,discount:c.payload.data[0].discount,gstpercentage:c.payload.data[0].gstpercentage,payableamount:c.payload.data[0].payableamount,vendoraddress:c.payload.data[0].vendoraddress}}}),{inv:"",to_details:"",toName:"",city:"",address:"",status:"",payment:"",gst:"",dated:"",finalamount:0,discount:0,gstpercentage:0,data:[]});let[O,x]=Object(s.useState)((()=>"")),[p,u]=Object(s.useState)((()=>[]));const[v,y]=Object(s.useState)((()=>!1)),g=e=>{x(e.target.value)},N=()=>{x(""),y((()=>!1)),u((()=>[]))},_=()=>{l.a.get("".concat("https://rightchoiceprops.com/backend/","/items/find/").concat(O)).then((e=>{u((()=>e.data)),y((()=>!0))}))},f=e=>{l.a.get("".concat("https://rightchoiceprops.com/backend/","/invoice/").concat(e,"/payments")).then((async e=>{h(e.data)})),l.a.get("".concat("https://rightchoiceprops.com/backend/","/invoice/").concat(e,"/details")).then((async c=>{console.log("response",c),m({type:t,payload:{data:c.data,inv:e}}),a((()=>!0))}))};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(i.M,{children:[Object(o.jsx)(i.m,{xs:12,children:Object(o.jsx)(i.h,{className:"mb-4",children:Object(o.jsx)(i.l,{children:Object(o.jsx)("form",{children:Object(o.jsxs)(i.M,{children:[Object(o.jsx)("div",{className:"col-sm-2",children:Object(o.jsx)("strong",{children:"Search Items"})}),Object(o.jsx)("div",{className:"col-sm-4",children:Object(o.jsx)(i.w,{value:O,type:"text",onChange:g,placeholder:"Search Items by - code/name/nickname"})}),Object(o.jsxs)("div",{className:"col-sm-3",children:[Object(o.jsx)(i.e,{color:"primary",type:"submit",onClick:()=>_(),children:"Search"}),"\xa0\xa0\xa0",Object(o.jsx)(i.e,{color:"secondary",type:"button",onClick:N,children:"Reset"})]})]})})})})}),Object(o.jsx)(i.m,{xs:12,children:Object(o.jsxs)(i.h,{className:"mb-4",children:[Object(o.jsx)(i.l,{children:"Search Results"}),Object(o.jsx)(i.i,{children:Object(o.jsx)(i.M,{children:v?p.length?Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("table",{className:"table prlist",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Code"}),Object(o.jsx)("th",{children:"Name"}),Object(o.jsx)("th",{children:"Invoice Number"}),Object(o.jsx)("th",{children:"Given To"}),Object(o.jsx)("th",{children:"Company"}),Object(o.jsx)("th",{children:"Content"}),Object(o.jsx)("th",{children:"Sent On"}),Object(o.jsx)("th",{children:"Expected On"}),Object(o.jsx)("th",{children:"Where"})]})}),Object(o.jsx)("tbody",{children:p.map((e=>Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:e.code}),Object(o.jsx)("td",{children:e.name}),Object(o.jsx)("td",{children:Object(o.jsx)(d.b,{to:"#",path:"#",onClick:()=>f(e.invoice_id),children:e.invoice_id})}),Object(o.jsx)("td",{children:e.prop_receiver_name}),Object(o.jsx)("td",{children:e.to_name}),Object(o.jsx)("td",{children:e.content_type}),Object(o.jsx)("td",{children:n.a.utc(e.startDate).format("ddd - MMM Do, YYYY")}),Object(o.jsx)("td",{children:n.a.utc(e.endDate).format("ddd - MMM Do, YYYY")}),Object(o.jsx)("td",{children:e.isBlocked?"Booked":"NR"===e.rstatus?"Pending":"R"===e.rstatus?e.code.indexOf("-D")>0?"Damaged":e.code.indexOf("-FULL_D")>0?"Fully Damaged":"Received":""})]})))})]})}):Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("h4",{children:"No Item found. Search with different Product Name, code or Nickname"})}):Object(o.jsx)(o.Fragment,{children:"Search with any product from pending invoices"})})})]})})]}),Object(o.jsx)("div",{className:"row",children:void 0!=b.data[0]?Object(o.jsx)(r.a,{invoice:b,payments:j,show:c,handleClose:()=>a((()=>!1)),isInvoice:!1,isPaid:!0,cb:_,finder:!0}):Object(o.jsx)(o.Fragment,{})})]})}}}]);
//# sourceMappingURL=37.95d15039.chunk.js.map